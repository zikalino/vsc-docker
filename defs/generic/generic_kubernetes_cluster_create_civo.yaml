#--------------------------------------------------------------------------------------------------------------
# Autogenerated by SmarterGen - do not modify this file.
#--------------------------------------------------------------------------------------------------------------

- type: section
  title: Basic Information
  subitems:
    - type: row
      subitems: 
        - type: textfield
          name: name
          description: Kubernetes cluster name. 
          produces: 
            - variable: name
    - type: row
      subitems: 
        - type: textfield
          name: label
          description: Labels to describe the cluster in `key=value` format, multiple can be declared. 
          produces: 
            - variable: label

    - $include: civo/__civo_region_list_selector.yaml

    - type: row
      subitems:
        - type: dropdown
          name: Type
          items:
            - k3s
            - talos
          produces:
            - variable: type
        - $include: civo/__civo_kubernetes_versions_talos_selector_field.yaml
          show-if:
            variable: type
            value: talos
        - $include: civo/__civo_kubernetes_versions_k3s_selector_field.yaml
          show-if:
            variable: type
            value: k3s
        - type: dropdown
          name: CNI Plugin
          items:
            - flannel
            - cilium
          produces:
            - variable: cni_plugin


- type: section
  title: Network
  subitems:
    - $include: civo/__civo_network_list_selector.yaml


- type: section
  title: Image / Application
  subitems:
    - $include: civo/__civo_kubernetes_applications_list_selector.yaml

- type: section
  subitems:
    - type: 'action-row'
      expandable: false
      name: civo kubernetes create
      consumes:
        - variable: name
          required: true
        - variable: region
          required: true
        - variable: application_name
          parameter: --applications
        - variable: network_id
          parameter: --network
        - variable: cni_plugin
          parameter: --cni-plugin
        - variable: type
          parameter: --cluster-type
        - variable: cluster_version
          parameter: --version
      install: civo kubernetes create ${name} --region ${region} --wait
      verify: civo kubernetes show ${name}
      produces:
        - variable: output
